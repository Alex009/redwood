import org.jetbrains.kotlin.gradle.dsl.JvmTarget
import org.jetbrains.kotlin.gradle.tasks.KotlinJvmCompile

apply plugin: 'org.jetbrains.kotlin.jvm'
apply plugin: 'org.jetbrains.kotlin.plugin.serialization'

redwoodBuild {
  publishing()
  application('redwood-lint', 'app.cash.redwood.tooling.lint.Main')
}

dependencies {
  implementation libs.clikt
  implementation libs.kotlinx.serialization.core
  implementation libs.lint.core
  implementation libs.xmlutil.serialization

  testImplementation libs.assertk
  testImplementation libs.jimfs
  testImplementation libs.junit
  testImplementation libs.kotlin.test
}

tasks.withType(JavaCompile).configureEach {
  sourceCompatibility = JavaVersion.VERSION_11.toString()
  targetCompatibility = JavaVersion.VERSION_11.toString()
}

tasks.withType(KotlinJvmCompile).configureEach {
  compilerOptions {
    jvmTarget.set(JvmTarget.JVM_11)
  }
}
