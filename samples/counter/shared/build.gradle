apply plugin: 'org.jetbrains.kotlin.multiplatform'
apply plugin: 'app.cash.redwood'

kotlin {
  ios()
  js {
    browser()
  }
  jvm()

  sourceSets {
    commonMain {
      dependencies {
        api projects.samples.counter.sunspot.compose
      }
    }
    commonTest {
      dependencies {
        implementation deps.kotlin.test
        implementation projects.samples.counter.sunspot.test
        // TODO remove the need for these dependencies!
        implementation projects.samples.counter.sunspot.compose.protocol
        implementation projects.samples.counter.sunspot.widget.protocol
      }
    }
    nativeTest {
    }
  }

  configure([
    targets.iosArm64,
    targets.iosX64,
  ]) {
    compilations.test.source(sourceSets.nativeTest)
  }
}
